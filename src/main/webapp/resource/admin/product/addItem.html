<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>상품 등록</title>
    <script>
        function displayImageAsync(input, displayElement) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    displayElement.innerHTML = '<img src="' + e.target.result + '" width="50" height="50" />';
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

        function applyChanges() {
            var productName = document.getElementById('productName').value;
            var productPrice = document.getElementById('productPrice').value;
            var productSpecInput = document.getElementById('productSpec');
            var productDesc1Input = document.getElementById('productDesc1');
            var productDesc2Input = document.getElementById('productDesc2');
            var refundPolicyInput = document.getElementById('refundPolicy');
            var totalQty = document.getElementById('totalQty').value;

            var table = document.getElementById('productTable');
            var newRow = table.insertRow(-1);

            var cell1 = newRow.insertCell(0);
            displayImageAsync(productSpecInput, cell1);

            var cell2 = newRow.insertCell(1);
            cell2.innerHTML = productName;

            var cell3 = newRow.insertCell(2);
            cell3.innerHTML = productPrice;

            var cell4 = newRow.insertCell(3);
            displayImageAsync(productSpecInput, cell4);

            var cell5 = newRow.insertCell(4);
            displayImageAsync(productDesc1Input, cell5);

            var cell6 = newRow.insertCell(5);
            displayImageAsync(productDesc2Input, cell6);

            var cell7 = newRow.insertCell(6);
            displayImageAsync(refundPolicyInput, cell7);

            var cell8 = newRow.insertCell(7);
            cell8.innerHTML = totalQty;

            var cell9 = newRow.insertCell(8);
            cell9.innerHTML = '<button onclick="deleteRow(this)">삭제</button>';
        }

        function deleteRow(btn) {
            var row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }

        function closeWindow() {
            window.close();
        }
    </script>
</head>
<body>

    <table border="1" id="productTable">
        <tr>
            <th>상품 이미지</th>
            <th>상품이름</th>
            <th>가격</th>
            <th>상품 규격</th>
            <th>상품 상세 설명1</th>
            <th>상품 상세 설명2</th>
            <th>반품 및 환불 규정</th>
            <th>등록 수량</th>
            <th>관리</th>
        </tr>
    </table>

    <form id="addItemForm">
        <!-- 입력 폼들 -->
        <button type="button" onclick="applyChanges()">추가</button>
        <button type="button" onclick="closeWindow()">닫기</button>
    </form>

</body>
</html>
